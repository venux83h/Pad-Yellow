local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local hrp = character:WaitForChild("HumanoidRootPart")

-- Create the support box FIRST
local box = Instance.new("Part")
box.Name = "HopBox"
box.Size = Vector3.new(20, 20, 20)
box.Color = Color3.fromRGB(255, 255, 0)
box.Transparency = 1 -- invisible
box.Anchored = false
box.CanCollide = true
box.Massless = true
box.Parent = character

-- Position box UNDER the character
box.CFrame = hrp.CFrame * CFrame.new(0, -10, 0)

-- Weld box to HRP
local weld = Instance.new("WeldConstraint")
weld.Part0 = hrp
weld.Part1 = box
weld.Parent = box

-- Noclip character body EXCEPT box
for _, part in pairs(character:GetDescendants()) do
	if part:IsA("BasePart") and part ~= box then
		part.CanCollide = false
	end
end

-- Prevent falling states
humanoid:SetStateEnabled(Enum.HumanoidStateType.Freefall, false)
humanoid:SetStateEnabled(Enum.HumanoidStateType.FallingDown, false)
humanoid:SetStateEnabled(Enum.HumanoidStateType.Ragdoll, false)

-- Keep humanoid alive
humanoid.BreakJointsOnDeath = false
humanoid.Health = humanoid.MaxHealth

-- Hop loop (no forces)
humanoid.JumpPower = 60
humanoid.UseJumpPower = true

RunService.Heartbeat:Connect(function()
	if humanoid.FloorMaterial ~= Enum.Material.Air then
		humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)
